// winec.cpp -- Wine í´ë˜ìŠ¤ êµ¬í˜„

#include "winec.h" // ìš°ë¦¬ê°€ ë§Œë“  í—¤ë” íŒŒì¼ì„ í¬í•¨
#include <iostream>

// --- 1. ì²« ë²ˆì§¸ ìƒì„±ì êµ¬í˜„ ---
Wine::Wine(const char * l, int y)
    : std :: string(l), num_years(y)
    // label(l), num_years(y)
{
    PairArray::operator=(PairArray(ArrayInt(y), ArrayInt(y)));
    // data.first.resize(y, 0);
    // data.second.resize(y, 0);
}

// --- 2. ë‘ ë²ˆì§¸ ìƒì„±ì êµ¬í˜„ ---
Wine::Wine(const char * l, int y, const int yr[], const int bot[])
    : std :: string(l),
    PairArray(ArrayInt(yr, y), ArrayInt(bot,y)),
    num_years(y)


/*
ArrayIntëŠ” std::valarray<int>ì˜ ë³„ëª…ì…ë‹ˆë‹¤. valarrayëŠ”
(C-ìŠ¤íƒ€ì¼ ë°°ì—´, ê°œìˆ˜)ë¥¼ ì¸ìë¡œ ë°›ëŠ” ìƒì„±ìë¥¼ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
ArrayInt(yr, y):
yr ë°°ì—´({1993...})ë¡œë¶€í„°
y ê°œ(3ê°œ)ë§Œí¼ ë³µì‚¬í•´ì„œ
**"ì—°ë„ valarray"**ë¥¼ ë§Œë“­ë‹ˆë‹¤.

ArrayInt(bot, y):
bot ë°°ì—´({48...})ë¡œë¶€í„°
y ê°œ(3ê°œ)ë§Œí¼ ë³µì‚¬í•´ì„œ
**"ìˆ˜ëŸ‰ valarray"**ë¥¼ ë§Œë“­ë‹ˆë‹¤.
 */
// label(l), num_years(y), data(ArrayInt(yr, y), ArrayInt(bot, y))
{
    // ë©¤ë²„ ì´ˆê¸°í™” ëª©ë¡ì—ì„œ ì™„ë£Œ
}

// --- 3. GetBottles() í•¨ìˆ˜ êµ¬í˜„ ---
void Wine::GetBottles() // <--- const ì—†ìŒ (í—¤ë”ì™€ ì¼ì¹˜)
{
    std::cout << num_years << "ë…„ ê°„ì˜ ë°ì´í„°ë¥¼ ì…ë ¥í•˜ì‹­ì‹œì˜¤:\n";

    for (int i = 0; i < num_years; ++i)
    {
        std::cout << "ë…„ë„ë¥¼ ì…ë ¥í•˜ì‹­ì‹œì˜¤: ";
        std::cin >> PairArray::first[i];
        std::cout << "ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì‹­ì‹œì˜¤: ";
        std::cin >> PairArray::second[i];
    }
}

// --- 4. Show() í•¨ìˆ˜ êµ¬í˜„ ---
void Wine::Show() const // <--- const ìˆìŒ (í—¤ë”ì™€ ì¼ì¹˜)
{
    std::cout << "ì™€ì¸: " << (const std::string &)(* this) << "\n";
    std::cout << "\të…„ë„\tìˆ˜ëŸ‰\n";
    /*

*this (ê°ì²´ ìì‹ )
Wine í´ë˜ìŠ¤ì˜ ë©¤ë²„ í•¨ìˆ˜ ì•ˆì—ì„œ thisëŠ” Wine ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„°ì…ë‹ˆë‹¤.
*thisëŠ” ê·¸ í¬ì¸í„°ê°€ ê°€ë¦¬í‚¤ëŠ” ëŒ€ìƒ, ì¦‰ Wine ê°ì²´ ìì‹ ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

(const std::string &) (í˜•ë³€í™˜)
ì´ê²ƒì´ ì´ ì½”ë“œì˜ í•µì‹¬ì¸ **C-ìŠ¤íƒ€ì¼ í˜•ë³€í™˜(C-style Cast)**ì…ë‹ˆë‹¤.
ì»´íŒŒì¼ëŸ¬ì—ê²Œ "ì§€ê¸ˆë¶€í„° *this (Wine ê°ì²´)ë¥¼ const std::string & (ìƒìˆ˜ string ì°¸ì¡°) íƒ€ì…ìœ¼ë¡œ ê°•ì œë¡œ ì·¨ê¸‰í•´ë¼"ë¼ê³  ëª…ë ¹í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.


â“ ì™œ ì´ëŸ° ë³µì¡í•œ í˜•ë³€í™˜ì„ ì‚¬ìš©í• ê¹Œìš”?
Private ìƒì† ë•Œë¬¸ì…ë‹ˆë‹¤.
Wine í´ë˜ìŠ¤ëŠ” private std::stringì„ ìƒì†ë°›ì•˜ìŠµë‹ˆë‹¤.
ì´ëŠ” Wine ê°ì²´ê°€ ë‚´ë¶€ì— stringì˜ ì†ì„±ì„ ê°€ì§€ê³  ìˆì§€ë§Œ, ì´ ì‚¬ì‹¤ì´ ì™¸ë¶€ì—ëŠ” ì™„ë²½íˆ ìˆ¨ê²¨ì ¸ ìˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.

ë”°ë¼ì„œ main í•¨ìˆ˜ì—ì„œëŠ” Wine ê°ì²´ë¥¼ stringì²˜ëŸ¼ ë‹¤ë£° ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ, Wine í´ë˜ìŠ¤ **ë‚´ë¶€(ë©¤ë²„ í•¨ìˆ˜)**ì—ì„œëŠ” "ë‚´ê°€ stringì„ ìƒì†ë°›ì•˜ë‹¤"ëŠ” ì‚¬ì‹¤ì„ ì•Œê³  ìˆìŠµë‹ˆë‹¤.

Show() í•¨ìˆ˜ê°€ ìì‹ ì˜ ì´ë¦„(ì¦‰, string ë¶€ëª¨ ë¶€ë¶„)ì„ ì¶œë ¥í•˜ê³  ì‹¶ì„ ë•Œ,
ì»´íŒŒì¼ëŸ¬ì—ê²Œ "ë‚˜(*this)ëŠ” Wine ê°ì²´ì§€ë§Œ,
ì§€ê¸ˆì€ ë‚´ ì•ˆì— ìˆ¨ê²¨ì§„ string ë¶€ëª¨ ë¶€ë¶„ë§Œ êº¼ë‚´ì„œ ì“¸ ê±°ì•¼"ë¼ê³  ê°•ì œë¡œ ì•Œë ¤ì¤˜ì•¼ í•©ë‹ˆë‹¤.

ì´ "ê°•ì œë¡œ ì•Œë ¤ì£¼ëŠ” í–‰ìœ„"ê°€ ë°”ë¡œ (const std::string &) í˜•ë³€í™˜ì…ë‹ˆë‹¤.

ğŸ’¡ ë¹„ìœ :

*this (Wine ê°ì²´) = ì§€ê°‘ì´ ë‚´ì¥ëœ ìŠ¤ë§ˆíŠ¸í° ì¼€ì´ìŠ¤
private ìƒì† = ì§€ê°‘ì´ ê²‰ìœ¼ë¡œëŠ” ë³´ì´ì§€ ì•Šê²Œ ì•ˆìª½ì— ìˆ¨ê²¨ì ¸ ìˆìŠµë‹ˆë‹¤.
(const std::string &) (í˜•ë³€í™˜) = ì¼€ì´ìŠ¤ ì£¼ì¸(Wine í´ë˜ìŠ¤)ì´ "ì•ˆìª½ì— ìˆ¨ê²¨ì§„ ì§€ê°‘(string)
ë¶€ë¶„ë§Œ êº¼ë‚´ì„œ ì‚¬ìš©í•˜ê² ë‹¤"ê³  ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸í•˜ëŠ” í–‰ìœ„ì…ë‹ˆë‹¤.
     */

    for (int i = 0; i < num_years; ++i)
    {
        std::cout << "\t" << PairArray::first[i]
                  << "\t" << PairArray::second[i] << "\n";
    }
}

// --- 5. sum() í•¨ìˆ˜ êµ¬í˜„ ---
int Wine::sum() const // <--- const ìˆìŒ (í—¤ë”ì™€ ì¼ì¹˜)
{
    return PairArray::second.sum();
}